Bootstrap: docker
From: ubuntu:20.04

%post
    apt-get -y update
    DEBIAN_FRONTEND=noninteractive TZ=Etc/UTC apt-get -y install tzdata
    apt-get -y install linux-tools-generic
    apt-get -y install build-essential cmake ninja-build golang sysbench flex bison
    apt-get -y install wget unzip python3 time libc++-dev software-properties-common
    apt-get -y install libunwind-dev libgflags-dev libssl-dev libelf-dev libprotobuf-dev protobuf-compiler
    ln -s bash /bin/sh.bash
    mv /bin/sh.bash /bin/sh
    wget -O - https://apt.llvm.org/llvm-snapshot.gpg.key| apt-key add -
    apt-add-repository 'deb http://apt.llvm.org/focal/ llvm-toolchain-focal-15 main'
    add-apt-repository ppa:ubuntu-toolchain-r/test
    apt-get -y update 
    apt-get -y install clang-15

%environment
    export LC_ALL=C

%runscript
    cmake --version
    gcc --version
    g++ --version
    ninja --version
    sysbench --version
